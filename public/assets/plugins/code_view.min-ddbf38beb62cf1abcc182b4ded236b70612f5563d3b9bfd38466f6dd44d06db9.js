/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2}}),e.FE.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function r(){return f?f.getValue():c.val()}function i(e){var n=r();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled"),e.removeClass("fr-active"),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function s(e,n){c||l(),!f&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror&&(f=CodeMirror.fromTextArea(c.get(0),t.opts.codeMirrorOptions)),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')),t.$el.blur());var r=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),r=r.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),r=r.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(r=t.codeBeautifier.run(r,{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"	",indent_size:1,wrap_line_length:0}));var i,s;if(f){i=r.indexOf("FROALA-SM"),s=r.indexOf("FROALA-EM"),i>s?i=s:s-=9,r=r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var o=r.substring(0,i).length-r.substring(0,i).replace(/\n/g,"").length,a=r.substring(0,s).length-r.substring(0,s).replace(/\n/g,"").length;i=r.substring(0,i).length-r.substring(0,r.substring(0,i).lastIndexOf("\n")+1).length,s=r.substring(0,s).length-r.substring(0,r.substring(0,s).lastIndexOf("\n")+1).length,f.setSize(null,Math.max(n,150)),f.setValue(r),f.focus(),f.setSelection({line:o,ch:i},{line:a,ch:s}),f.refresh(),f.clearHistory()}else i=r.indexOf("FROALA-SM"),s=r.indexOf("FROALA-EM")-9,c.css("height",n),(t.opts.height||t.opts.heightMax)&&c.css("max-height",t.opts.height||t.opts.heightMax),c.val(r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")),c.focus(),c.get(0).setSelectionRange(i,s);t.$tb.find(" > .fr-command").not(e).addClass("fr-disabled"),e.addClass("fr-active"),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function o(e){"undefined"==typeof e&&(e=!n());var r=t.$tb.find('.fr-command[data-cmd="html"]');if(e){t.popups.hideAll();var o=t.$wp.outerHeight();t.$box.toggleClass("fr-code-view",!0),s(r,o)}else t.$box.toggleClass("fr-code-view",!1),i(r)}function a(){n()&&(o(t.$tb.find('button[data-cmd="html"]')),c.val("").removeData().remove()),u&&u.remove()}function l(){c=e('<textarea class="fr-code" tabindex="-1">'),t.$wp.append(c),c.attr("dir",t.opts.direction),t.opts.toolbarInline&&(u=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabindex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(u),t.events.bindClick(t.$box,"a.html-switch",function(){o(!1)}));var i=function(){return!n()};t.events.on("buttons.refresh",i),t.events.on("copy",i,!0),t.events.on("cut",i,!0),t.events.on("paste",i,!0),t.events.on("destroy",a,!0),t.events.on("html.set",function(){n()&&o(!0)}),t.events.on("form.submit",function(){n()&&(t.html.set(r()),t.events.trigger("contentChanged",[],!0))},!0)}function d(){return t.$wp?void 0:!1}var c,f,u;return{_init:d,toggle:o,isActive:n,get:r}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"})});